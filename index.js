const Discord=require("discord.js"),client=new Discord.Client;function del(msg,nb){msg.channel.fetchMessages({limit:nb}).then(messages=>{msg.channel.bulkDelete(messages)})}client.on("ready",()=>{client.user.setActivity("Make with ðŸ–¤ & â˜• by Max Zander"),console.log(`Logged in as ${client.user.tag}!`)}),client.on("message",msg=>{const purg=msg.guild.channels.find(channels=>"le-purgatoire"===channels.name),gen=msg.guild.channels.find(channels=>"ardoise-public"===channels.name),val=msg.guild.roles.find(roles=>"Clients"===roles.name),noval=msg.guild.roles.find(roles=>"Ames Errantes"===roles.name);if(msg.channel==gen&&("!discord"===msg.content&&(msg.delete(1e3),msg.reply("Vous pouvez invitez vos amis avec ce lien : \n https://discord.gg/KaUQJpU")),"!youtube"===msg.content&&(msg.delete(1e3),msg.reply("La chaine du comptoire : \nhttps://www.youtube.com/channel/UCPFaB1cT8ZiC_K8WmqNJfXA?view_as=public")),"ping"===msg.content&&(msg.reply("Pong!"),msg.delete())),msg.channel==purg&&("LCDA"===msg.content&&(del(msg,2),msg.member.addRole(val),msg.member.removeRole(noval)),"lu et approuvÃ©"===msg.content&&msg.reply("Veux-tu des lunettes ? https://lcda.marvinbost.fr/rules.html"),"lu et acceptÃ©"===msg.content&&msg.reply("Tiens le lien tu peux lire les rÃ¨gles ? https://lcda.marvinbost.fr/rules.html"),"acceptÃ©"===msg.content&&msg.reply("Est-ce que tu le fais exprÃ¨s ou tu as juste Ã©tais bercÃ©e trop prÃ©s du mur ? https://lcda.marvinbost.fr/rules.html")),msg.content.startsWith("!prune")){var nb=msg.content.substr(6);if(nb++,!msg.channel.permissionsFor(msg.author).hasPermission("MANAGE_MESSAGES"))return void message.channel.send("DÃ©solÃ©, vous n'avez pas la permission d'exÃ©cuter la commande \""+msg.content+'"');if(!msg.channel.permissionsFor(client.user).hasPermission("MANAGE_MESSAGES"))return void msg.channel.send("DÃ©solÃ©, je n'ai pas la permission d'exÃ©cuter la commande \""+msg.content+'"');"text"==msg.channel.type&&msg.channel.fetchMessages({limit:nb}).then(messages=>{msg.channel.bulkDelete(messages),messagesDeleted=messages.array().length,msg.channel.send("Suppression des messages rÃ©ussie. Nombre total de messages supprimÃ©s: "+messagesDeleted),del(msg,1)}).catch(err=>{console.log("Error while doing Bulk Delete"),console.log(err)})}if("!purge"===msg.content&&msg.author.hasPermission("KICK_MEMBERS")){let list=msg.guild.roles.find(roles=>"Clients"===roles.name).members;list.map(member=>member.removeRole(val)),list.map(member=>member.addRole(noval)),console.log("Une purge a Ã©tÃ© faite")}}),client.on("guildMemberAdd",member=>{const channel=member.guild.channels.find(channels=>"le-purgatoire"===channels.name),noval=member.guild.roles.find(roles=>"Ames Errantes"===roles.name);channel&&(member.addRole(noval),channel.send(`Bienvenue ${member} ! pour Ãªtre sÃ»r que tout le monde lit bien les rÃ¨gles, et quâ€™ils les respectent vous devrez entrer une phrase qui sera inscrite dans les rÃ¨gles qui nous certifiera que vous les avez lus et acceptÃ©.\n Les rÃ¨gles : https://lcda.marvinbost.fr/rules.html`))}),client.on("guildMemberRemove",member=>{member.guild.channels.find(channels=>"ardoise-public"===channels.name).send(`**${member.user}** est parti du serveur..... Bye Bye`)}),client.login(process.env.TOKEN);